import{s as K,n as N,e as W,o as Q,f as j}from"../chunks/scheduler.2b06ac85.js";import{S as X,i as Y,g as b,s as B,m as A,h as I,y as U,c as H,j as M,f,n as L,a as _,x as S,o as q,z as G}from"../chunks/index.65fe594c.js";import{c as V,e as E,g as $,t as z,w as P,b as R}from"../chunks/stores.7b63e1db.js";function Z(i){let t,o="stop",u,s;return{c(){t=b("button"),t.textContent=o},l(r){t=I(r,"BUTTON",{"data-svelte-h":!0}),U(t)!=="svelte-13e2xp5"&&(t.textContent=o)},m(r,c){_(r,t,c),u||(s=G(t,"click",i[9]),u=!0)},p:N,d(r){r&&f(t),u=!1,s()}}}function x(i){let t,o="start",u,s;return{c(){t=b("button"),t.textContent=o},l(r){t=I(r,"BUTTON",{"data-svelte-h":!0}),U(t)!=="svelte-8a1jnh"&&(t.textContent=o)},m(r,c){_(r,t,c),u||(s=G(t,"click",i[8]),u=!0)},p:N,d(r){r&&f(t),u=!1,s()}}}function F(i){let t,o,u,s,r,c=i[7](i[2],i[0]==="working"?i[3]:i[4])+"",v;return{c(){t=b("div"),o=A(i[1]),u=B(),s=b("div"),r=A("残り "),v=A(c)},l(n){t=I(n,"DIV",{});var a=M(t);o=L(a,i[1]),a.forEach(f),u=H(n),s=I(n,"DIV",{});var k=M(s);r=L(k,"残り "),v=L(k,c),k.forEach(f)},m(n,a){_(n,t,a),S(t,o),_(n,u,a),_(n,s,a),S(s,r),S(s,v)},p(n,a){a&2&&q(o,n[1]),a&29&&c!==(c=n[7](n[2],n[0]==="working"?n[3]:n[4])+"")&&q(v,c)},d(n){n&&(f(t),f(u),f(s))}}}function ee(i){let t,o='<a href="/config">config</a>',u,s,r,c,v,n,a,k="総稼働時間",h,T,m=i[6](i[5])+"",D;function O(e,l){return e[0]==="waiting"?x:Z}let w=O(i),p=w(i),d=i[0]!=="waiting"&&F(i);return{c(){t=b("div"),t.innerHTML=o,u=B(),s=b("div"),p.c(),r=B(),c=b("div"),d&&d.c(),v=B(),n=b("div"),a=b("div"),a.textContent=k,h=B(),T=b("div"),D=A(m)},l(e){t=I(e,"DIV",{"data-svelte-h":!0}),U(t)!=="svelte-1flbfld"&&(t.innerHTML=o),u=H(e),s=I(e,"DIV",{});var l=M(s);p.l(l),l.forEach(f),r=H(e),c=I(e,"DIV",{});var y=M(c);d&&d.l(y),y.forEach(f),v=H(e),n=I(e,"DIV",{});var g=M(n);a=I(g,"DIV",{"data-svelte-h":!0}),U(a)!=="svelte-9v70nz"&&(a.textContent=k),h=H(g),T=I(g,"DIV",{});var C=M(T);D=L(C,m),C.forEach(f),g.forEach(f)},m(e,l){_(e,t,l),_(e,u,l),_(e,s,l),p.m(s,null),_(e,r,l),_(e,c,l),d&&d.m(c,null),_(e,v,l),_(e,n,l),S(n,a),S(n,h),S(n,T),S(T,D)},p(e,[l]){w===(w=O(e))&&p?p.p(e,l):(p.d(1),p=w(e),p&&(p.c(),p.m(s,null))),e[0]!=="waiting"?d?d.p(e,l):(d=F(e),d.c(),d.m(c,null)):d&&(d.d(1),d=null),l&32&&m!==(m=e[6](e[5])+"")&&q(D,m)},i:N,o:N,d(e){e&&(f(t),f(u),f(s),f(r),f(c),f(v),f(n)),p.d(),d&&d.d()}}}function te(i,t,o){let u,s,r,c,v;W(i,V,e=>o(1,u=e)),W(i,E,e=>o(2,s=e)),W(i,P,e=>o(3,r=e)),W(i,R,e=>o(4,c=e)),W(i,z,e=>o(5,v=e));let n,a,k;const h=e=>{const l=Math.floor(e/60/60),y=Math.floor(e/60)%60,g=e%60,C=J=>String(J).padStart(2,"0");return`${C(l)}:${C(y)}:${C(g)}`},T=(e,l)=>{const g=$(l)-e;return h(g)};let m=null;const D=e=>{m&&clearInterval(m),e.volume=0;const l=setInterval(()=>{e.volume<.998&&(e.volume+=.001)},10);setTimeout(()=>{clearInterval(l),m=null},2e3),m=l,e.play()},O=e=>{m&&clearInterval(m);const l=setInterval(()=>{e.volume>.001&&(e.volume-=.001)},10);setTimeout(()=>{e.pause(),e.currentTime=0,m&&clearInterval(m),m=null},2e3),m=l};Q(()=>{a=new Audio("/sounds/break-bgm1.mp3"),a.loop=!0,k=new Audio("/sounds/tick.mp3"),k.volume=.2,V.subscribe(e=>{switch(o(0,n=e),e){case"waiting":a.pause(),a.currentTime=0;break;case"working":O(a);break;case"break":D(a),localStorage.setItem("totalWorkedTime",String(j(z)));break}}),E.subscribe(e=>{switch(n){case"working":e>0&&z.update(l=>l+1),e>=$(j(P))?(V.set("break"),E.set(0)):e>0&&(k.currentTime=0,k.play());break;case"break":e>=$(j(R))&&(V.set("working"),E.set(0))}})});let w;return[n,u,s,r,c,v,h,T,()=>{V.set("working"),E.set(0),w=setInterval(()=>{E.update(e=>e+1)},1e3)},()=>{V.set("waiting"),a.pause(),a.currentTime=0,clearInterval(w),localStorage.setItem("totalWorkedTime",String(j(z)))}]}class ae extends X{constructor(t){super(),Y(this,t,te,ee,K,{})}}export{ae as component};
